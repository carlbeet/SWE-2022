{"ast":null,"code":"import _slicedToArray from \"/opt/reddit-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport { runIfFn, warn } from \"@chakra-ui/utils\";\nimport * as React from \"react\";\nexport function useControllableProp(prop, state) {\n  var _React$useRef = React.useRef(prop !== undefined),\n      isControlled = _React$useRef.current;\n\n  var value = isControlled && typeof prop !== \"undefined\" ? prop : state;\n  return [isControlled, value];\n}\nvar defaultPropsMap = {\n  value: \"value\",\n  defaultValue: \"defaultValue\",\n  onChange: \"onChange\"\n};\n/**\n * React hook for using controlling component state.\n * @param props\n */\n\nexport function useControllableState(props) {\n  var valueProp = props.value,\n      defaultValue = props.defaultValue,\n      onChange = props.onChange,\n      _props$shouldUpdate = props.shouldUpdate,\n      shouldUpdate = _props$shouldUpdate === void 0 ? function () {\n    return true;\n  } : _props$shouldUpdate,\n      _props$name = props.name,\n      name = _props$name === void 0 ? \"Component\" : _props$name,\n      _props$propsMap = props.propsMap,\n      propsMap = _props$propsMap === void 0 ? defaultPropsMap : _props$propsMap;\n\n  var _React$useState = React.useState(defaultValue),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      valueState = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  var _React$useRef2 = React.useRef(valueProp !== undefined),\n      isControlled = _React$useRef2.current; // don't switch from controlled to uncontrolled\n\n\n  React.useEffect(function () {\n    var nextIsControlled = valueProp !== undefined;\n    var nextMode = nextIsControlled ? \"a controlled\" : \"an uncontrolled\";\n    var mode = isControlled ? \"a controlled\" : \"an uncontrolled\";\n    warn({\n      condition: isControlled !== nextIsControlled,\n      message: \"Warning: \" + name + \" is changing from \" + mode + \" to \" + nextMode + \" component. \" + \"Components should not switch from controlled to uncontrolled (or vice versa). \" + (\"Use the '\" + propsMap[\"value\"] + \"' with an '\" + propsMap[\"onChange\"] + \"' handler. \") + (\"If you want an uncontrolled component, remove the \" + propsMap[\"value\"] + \" prop and use '\" + propsMap[\"defaultValue\"] + \"' instead. \\\"\") + \"More info: https://fb.me/react-controlled-components\"\n    });\n  }, [valueProp, isControlled, name]);\n\n  var _React$useRef3 = React.useRef(defaultValue),\n      _defaultValue = _React$useRef3.current;\n\n  React.useEffect(function () {\n    warn({\n      condition: _defaultValue !== defaultValue,\n      message: \"Warning: A component is changing the default value of an uncontrolled \" + name + \" after being initialized. \" + (\"To suppress this warning opt to use a controlled \" + name + \".\")\n    });\n  }, [JSON.stringify(defaultValue)]);\n  var value = isControlled ? valueProp : valueState;\n  var updateValue = React.useCallback(function (next) {\n    var nextValue = runIfFn(next, value);\n    var shouldUpdateState = shouldUpdate(value, nextValue);\n    if (!shouldUpdateState) return;\n\n    if (!isControlled) {\n      setValue(next);\n    }\n\n    onChange == null ? void 0 : onChange(nextValue);\n  }, [onChange, shouldUpdate, isControlled, value]);\n  return [value, updateValue];\n}","map":{"version":3,"sources":["../../src/use-controllable.ts"],"names":["current","isControlled","React","prop","value","defaultPropsMap","defaultValue","onChange","shouldUpdate","name","propsMap","valueProp","nextIsControlled","nextMode","mode","warn","condition","message","_defaultValue","JSON","updateValue","next","nextValue","runIfFn","shouldUpdateState","setValue"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { runIfFn, warn } from \"@chakra-ui/utils\"\nimport * as React from \"react\"\n\nexport function useControllableProp<T>(prop: T | undefined, state: T) {\n  const { current: isControlled } = React.useRef(prop !== undefined)\n  const value = isControlled && typeof prop !== \"undefined\" ? prop : state\n  return [isControlled, value] as const\n}\n\nexport interface UseControllableStateProps<T> {\n  /**\n   * The value to used in controlled mode\n   */\n  value?: T\n  /**\n   * The initial value to be used, in uncontrolled mode\n   */\n  defaultValue?: T | (() => T)\n  /**\n   * The callback fired when the value changes\n   */\n  onChange?: (nextValue: T) => void\n  /**\n   * The condition to update the state\n   */\n  shouldUpdate?: (prevState: T, state: T) => boolean\n  /**\n   * The component name (for warnings)\n   */\n  name?: string\n  /**\n   * A mapping for the props to give more contextual warning messages.\n   *\n   * In some components `value` might be called `index`, and defaultValue\n   * might be called `defaultIndex`, so this map helps us generate\n   * contextual warning messages\n   */\n  propsMap?: {\n    value?: string\n    defaultValue?: string\n    onChange?: string\n  }\n}\n\nconst defaultPropsMap = {\n  value: \"value\",\n  defaultValue: \"defaultValue\",\n  onChange: \"onChange\",\n}\n\n/**\n * React hook for using controlling component state.\n * @param props\n */\nexport function useControllableState<T>(props: UseControllableStateProps<T>) {\n  const {\n    value: valueProp,\n    defaultValue,\n    onChange,\n    shouldUpdate = () => true,\n    name = \"Component\",\n    propsMap = defaultPropsMap,\n  } = props\n\n  const [valueState, setValue] = React.useState(defaultValue as T)\n  const { current: isControlled } = React.useRef(valueProp !== undefined)\n\n  // don't switch from controlled to uncontrolled\n  React.useEffect(() => {\n    const nextIsControlled = valueProp !== undefined\n\n    const nextMode = nextIsControlled ? \"a controlled\" : \"an uncontrolled\"\n    const mode = isControlled ? \"a controlled\" : \"an uncontrolled\"\n\n    warn({\n      condition: isControlled !== nextIsControlled,\n      message:\n        `Warning: ${name} is changing from ${mode} to ${nextMode} component. ` +\n        `Components should not switch from controlled to uncontrolled (or vice versa). ` +\n        `Use the '${propsMap[\"value\"]}' with an '${propsMap[\"onChange\"]}' handler. ` +\n        `If you want an uncontrolled component, remove the ${propsMap[\"value\"]} prop and use '${propsMap[\"defaultValue\"]}' instead. \"` +\n        `More info: https://fb.me/react-controlled-components`,\n    })\n  }, [valueProp, isControlled, name])\n\n  const { current: _defaultValue } = React.useRef(defaultValue)\n\n  React.useEffect(() => {\n    warn({\n      condition: _defaultValue !== defaultValue,\n      message:\n        `Warning: A component is changing the default value of an uncontrolled ${name} after being initialized. ` +\n        `To suppress this warning opt to use a controlled ${name}.`,\n    })\n  }, [JSON.stringify(defaultValue)])\n\n  const value = isControlled ? (valueProp as T) : valueState\n\n  const updateValue = React.useCallback(\n    (next: React.SetStateAction<T>) => {\n      const nextValue = runIfFn(next, value)\n      const shouldUpdateState = shouldUpdate(value, nextValue)\n\n      if (!shouldUpdateState) return\n\n      if (!isControlled) {\n        setValue(next)\n      }\n\n      onChange?.(nextValue)\n    },\n    [onChange, shouldUpdate, isControlled, value],\n  )\n\n  return [value, updateValue] as [T, React.Dispatch<React.SetStateAction<T>>]\n}\n"]},"metadata":{},"sourceType":"module"}
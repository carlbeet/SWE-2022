{"version":3,"sources":["../../src/use-transition-config.ts"],"names":["useTheme","memoizedGet","get","runIfFn","createContext","React","transitionConfigToCSS","useTransitionConfig","themeKey","props","classNames","theme","path","defaultConfig","configObjectOrFn","transitionConfig","config","partsTransitionRef","useRef","useMemo","partsTransition","part","timeout","className","toLowerCase","styles","prevTransitionString","JSON","stringify","current","nextTransitionString","TransitionsProvider","useTransitions","errorMessage"],"mappings":"AAAA,SAA4BA,QAA5B,QAA4C,mBAA5C;AACA,SAEEC,WAAW,IAAIC,GAFjB,EAGEC,OAHF,EAIEC,aAJF,QAKO,kBALP;AAMA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,SAA2BC,qBAA3B,QAAwD,qBAAxD;AAeA,OAAO,SAASC,mBAAT,CACLC,QADK,EAELC,KAFK,EAGLC,UAHK,EAIL;AACA,MAAMC,KAAK,GAAGX,QAAQ,EAAtB;AACA,MAAMY,IAAI,mBAAiBJ,QAAjB,gBAAV;AAEA,MAAMK,aAAa,GAAGX,GAAG,CAACS,KAAD,EAAQC,IAAR,CAAzB;AACA,MAAME,gBAAgB,GAAIL,KAAK,CAACM,gBAAN,IACxBF,aADF;AAEA,MAAMG,MAAM,GAAGb,OAAO,CAACW,gBAAD,EAAmBL,KAAnB,CAAtB;AAEA,MAAMQ,kBAAkB,GAAGZ,KAAK,CAACa,MAAN,CAA6B,EAA7B,CAA3B;AAEA,SAAOb,KAAK,CAACc,OAAN,CAAc,MAAM;AACzB,QAAIH,MAAJ,EAAY;AACV,UAAMI,eAA+B,GAAG,EAAxC;;AAEA,WAAK,IAAMC,KAAX,IAAmBL,MAAnB,EAA2B;AAAA;;AACzB,YAAM;AAAEM,UAAAA,OAAO,GAAG;AAAZ,YAAkBN,MAAM,CAACK,KAAD,CAA9B;AACA,YAAME,SAAS,wBAAGb,UAAH,oBAAGA,UAAU,CAAGW,KAAH,CAAb,gCAAyBb,QAAQ,CAACgB,WAAT,EAAxC;AACA,YAAMC,MAAM,GAAGnB,qBAAqB,CAACU,MAAM,CAACK,KAAD,CAAP,EAAeE,SAAf,CAApC;AACAH,QAAAA,eAAe,CAACC,KAAD,CAAf,GAAwB;AAAEI,UAAAA,MAAF;AAAUH,UAAAA,OAAV;AAAmBC,UAAAA;AAAnB,SAAxB;AACD;;AAED,UAAMG,oBAAoB,GAAGC,IAAI,CAACC,SAAL,CAAeX,kBAAkB,CAACY,OAAlC,CAA7B;AACA,UAAMC,oBAAoB,GAAGH,IAAI,CAACC,SAAL,CAAeR,eAAf,CAA7B;;AAEA,UAAIU,oBAAoB,KAAKJ,oBAA7B,EAAmD;AACjDT,QAAAA,kBAAkB,CAACY,OAAnB,GAA6BT,eAA7B;AACD;AACF;;AAED,WAAOH,kBAAkB,CAACY,OAA1B;AACD,GApBM,EAoBJ,CAACnB,UAAD,EAAaM,MAAb,EAAqBR,QAArB,CApBI,CAAP;AAqBD;AAQD,IAAM,CAACuB,mBAAD,EAAsBC,cAAtB,IAAwC5B,aAAa,CAEzD;AACA6B,EAAAA,YAAY,EACV;AAFF,CAFyD,CAA3D;AAOA,SAASF,mBAAT,EAA8BC,cAA9B","sourcesContent":["import { SystemStyleObject, useTheme } from \"@chakra-ui/system\"\nimport {\n  Dict,\n  memoizedGet as get,\n  runIfFn,\n  createContext,\n} from \"@chakra-ui/utils\"\nimport * as React from \"react\"\nimport { TransitionConfig, transitionConfigToCSS } from \"./transition-config\"\n\ntype MaybeTransitionConfig =\n  | { [part: string]: TransitionConfig }\n  | ((props: Dict) => { [part: string]: TransitionConfig })\n  | undefined\n\ntype Timeout = TransitionConfig[\"timeout\"]\n\ntype PartTransition = Dict<{\n  styles: SystemStyleObject\n  timeout: NonNullable<Timeout>\n  className: string\n}>\n\nexport function useTransitionConfig(\n  themeKey: string,\n  props: Dict,\n  classNames?: Dict<string>,\n) {\n  const theme = useTheme()\n  const path = `components.${themeKey}.transition`\n\n  const defaultConfig = get(theme, path)\n  const configObjectOrFn = (props.transitionConfig ||\n    defaultConfig) as MaybeTransitionConfig\n  const config = runIfFn(configObjectOrFn, props)\n\n  const partsTransitionRef = React.useRef<PartTransition>({})\n\n  return React.useMemo(() => {\n    if (config) {\n      const partsTransition: PartTransition = {}\n\n      for (const part in config) {\n        const { timeout = 0 } = config[part]\n        const className = classNames?.[part] ?? themeKey.toLowerCase()\n        const styles = transitionConfigToCSS(config[part], className)\n        partsTransition[part] = { styles, timeout, className }\n      }\n\n      const prevTransitionString = JSON.stringify(partsTransitionRef.current)\n      const nextTransitionString = JSON.stringify(partsTransition)\n\n      if (nextTransitionString !== prevTransitionString) {\n        partsTransitionRef.current = partsTransition\n      }\n    }\n\n    return partsTransitionRef.current\n  }, [classNames, config, themeKey])\n}\n\nexport type UseTransitionConfigReturn = ReturnType<typeof useTransitionConfig>\n\nexport type TransitionConfigProps = {\n  transitionConfig?: Record<string, TransitionConfig>\n}\n\nconst [TransitionsProvider, useTransitions] = createContext<\n  UseTransitionConfigReturn\n>({\n  errorMessage:\n    \"useTransitions: `context` is undefined or null. Seems you forgot to wrap the components within <TransitionsProvider />\",\n})\n\nexport { TransitionsProvider, useTransitions }\n"],"file":"use-transition-config.js"}
{"version":3,"sources":["../../src/color-mode.utils.ts"],"names":["isBrowser","noop","classNames","light","dark","mockBody","classList","add","remove","body","document","syncBodyClassName","isDark","getMediaQuery","query","mediaQueryList","window","matchMedia","matches","media","queries","lightQuery","darkQuery","getColorScheme","addListener","fn","listener","removeListener"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,IAApB,QAAgC,kBAAhC;AAEA,IAAMC,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE,iBADU;AAEjBC,EAAAA,IAAI,EAAE;AAFW,CAAnB;;AAOA;;;AAGA,IAAMC,QAAQ,GAAG;AACfC,EAAAA,SAAS,EAAE;AAAEC,IAAAA,GAAG,EAAEN,IAAP;AAAaO,IAAAA,MAAM,EAAEP;AAArB;AADI,CAAjB;AAIA,OAAO,IAAMQ,IAAI,GAAGT,SAAS,GAAGU,QAAQ,CAACD,IAAZ,GAAmBJ,QAAzC;AAEP;;;;AAGA,OAAO,SAASM,iBAAT,CAA2BC,MAA3B,EAA4C;AACjDH,EAAAA,IAAI,CAACH,SAAL,CAAeC,GAAf,CAAmBK,MAAM,GAAGV,UAAU,CAACE,IAAd,GAAqBF,UAAU,CAACC,KAAzD;AACAM,EAAAA,IAAI,CAACH,SAAL,CAAeE,MAAf,CAAsBI,MAAM,GAAGV,UAAU,CAACC,KAAd,GAAsBD,UAAU,CAACE,IAA7D;AACD;AAED;;;;AAGA,SAASS,aAAT,CAAuBC,KAAvB,EAAsC;AACpC,MAAMC,cAAc,GAAGC,MAAM,CAACC,UAAV,oBAAGD,MAAM,CAACC,UAAP,CAAoBH,KAApB,CAAvB;AACA,MAAMI,OAAO,GAAG,CAAC,CAACH,cAAc,CAACI,KAAjB,KAA2BJ,cAAc,CAACG,OAA1D;AACA,SAAOA,OAAP;AACD;;AAED,OAAO,IAAME,OAAO,GAAG;AACrBjB,EAAAA,KAAK,EAAE,+BADc;AAErBC,EAAAA,IAAI,EAAE;AAFe,CAAhB;AAKP,OAAO,IAAMiB,UAAU,GAAGD,OAAO,CAACjB,KAA3B;AACP,OAAO,IAAMmB,SAAS,GAAGF,OAAO,CAAChB,IAA1B;AAEP,OAAO,SAASmB,cAAT,GAA0B;AAC/B,MAAMX,MAAM,GAAGC,aAAa,CAACO,OAAO,CAAChB,IAAT,CAA5B;AACA,SAAOQ,MAAM,GAAG,MAAH,GAAY,OAAzB;AACD;AAED;;;;;AAIA,OAAO,SAASY,WAAT,CAAqBC,EAArB,EAAmC;AACxC,MAAI,EAAE,gBAAgBT,MAAlB,CAAJ,EAA+B;AAC7B,WAAOf,IAAP;AACD;;AAED,MAAMc,cAAc,GAAGC,MAAM,CAACC,UAAP,CAAkBG,OAAO,CAAChB,IAA1B,CAAvB;;AAEA,MAAMsB,QAAQ,GAAG,MAAM;AACrBD,IAAAA,EAAE,CAAC,CAAC,CAACV,cAAc,CAACG,OAAjB,GAA2B,MAA3B,GAAoC,OAArC,CAAF;AACD,GAFD;;AAIAQ,EAAAA,QAAQ;AACRX,EAAAA,cAAc,CAACS,WAAf,CAA2BE,QAA3B;AAEA,SAAO,MAAM;AACXX,IAAAA,cAAc,CAACY,cAAf,CAA8BD,QAA9B;AACD,GAFD;AAGD","sourcesContent":["import { isBrowser, noop } from \"@chakra-ui/utils\"\n\nconst classNames = {\n  light: \"chakra-ui-light\",\n  dark: \"chakra-ui-dark\",\n}\n\nexport type ColorMode = \"light\" | \"dark\"\n\n/**\n * SSR: Graceful fallback for the `body` element\n */\nconst mockBody = {\n  classList: { add: noop, remove: noop },\n}\n\nexport const body = isBrowser ? document.body : mockBody\n\n/**\n * Function to add/remove class from `body` based on color mode\n */\nexport function syncBodyClassName(isDark: boolean) {\n  body.classList.add(isDark ? classNames.dark : classNames.light)\n  body.classList.remove(isDark ? classNames.light : classNames.dark)\n}\n\n/**\n * Check if JS media query matches the query string passed\n */\nfunction getMediaQuery(query: string) {\n  const mediaQueryList = window.matchMedia?.(query)\n  const matches = !!mediaQueryList.media === mediaQueryList.matches\n  return matches\n}\n\nexport const queries = {\n  light: \"(prefers-color-scheme: light)\",\n  dark: \"(prefers-color-scheme: dark)\",\n}\n\nexport const lightQuery = queries.light\nexport const darkQuery = queries.dark\n\nexport function getColorScheme() {\n  const isDark = getMediaQuery(queries.dark)\n  return isDark ? \"dark\" : \"light\"\n}\n\n/**\n * Adds system os color mode listener, and run the callback\n * once preference changes\n */\nexport function addListener(fn: Function) {\n  if (!(\"matchMedia\" in window)) {\n    return noop\n  }\n\n  const mediaQueryList = window.matchMedia(queries.dark)\n\n  const listener = () => {\n    fn(!!mediaQueryList.matches ? \"dark\" : \"light\")\n  }\n\n  listener()\n  mediaQueryList.addListener(listener)\n\n  return () => {\n    mediaQueryList.removeListener(listener)\n  }\n}\n"],"file":"color-mode.utils.js"}
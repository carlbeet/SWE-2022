{"version":3,"sources":["../../src/use-popover.ts"],"names":["TRIGGER_TYPE","click","hover","usePopover","props","closeOnBlur","closeOnEsc","initialFocusRef","placementProp","placement","gutter","id","arrowSize","returnFocusOnClose","autoFocus","arrowShadowColor","modifiers","trigger","openDelay","closeDelay","isLazy","isOpen","onClose","onOpen","onToggle","triggerRef","popoverRef","isHoveringRef","hasHeader","setHasHeader","hasBody","setHasBody","triggerId","popoverId","headerId","bodyId","fallbackShadowColor","shadowColor","arrowColor","forceUpdate","popper","reference","arrow","visible","focusRef","ref","onInteractOutside","event","current","contains","target","getPopoverProps","popoverProps","children","tabIndex","hidden","role","onKeyDown","key","style","undefined","onMouseEnter","onMouseLeave","setTimeout","getArrowProps","openTimeout","closeTimeout","getTriggerProps","triggerProps","onClick","onFocus","onBlur","window","clearTimeout"],"mappings":"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","sourcesContent":["import { useBoolean, useDisclosure, useIds } from \"@chakra-ui/hooks\"\nimport { Placement, usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport { useColorModeValue, useToken } from \"@chakra-ui/system\"\nimport {\n  callAllHandlers,\n  HTMLProps,\n  mergeRefs,\n  PropGetter,\n} from \"@chakra-ui/utils\"\nimport { useInteractOutside } from \"@react-aria/interactions\"\nimport { RefObject, useCallback, useEffect, useRef } from \"react\"\nimport { useFocusOnHide, useFocusOnShow } from \"./popover.utils\"\n\nconst TRIGGER_TYPE = {\n  click: \"click\",\n  hover: \"hover\",\n} as const\n\nexport interface UsePopoverProps {\n  /**\n   * The html `id` attribute of the popover.\n   * If not provided, we generate a unique id.\n   *\n   * This `id` is also used to auto-generate the `aria-labelledby`\n   * and `aria-decribedby` attributes that points to the `PopoverHeader` and `PopoverBody`\n   */\n  id?: string\n  /**\n   * If `true`, the popover will be opened in controlled mode.\n   */\n  isOpen?: boolean\n  /**\n   * If `true`, the popover will be initially opened.\n   */\n  defaultIsOpen?: boolean\n  /**\n   * The `ref` of the element that should receive focus when the popover opens.\n   */\n  initialFocusRef?: RefObject<any>\n  /**\n   * If `true`, focus will be returned to the element that triggers the popover\n   * when it closes\n   */\n  returnFocusOnClose?: boolean\n  /**\n   * If `true`, focus will be transferred to the first interactive element\n   * when the popover opens\n   */\n  autoFocus?: boolean\n  /**\n   * The gap (in pixels) to apply between the popover and the target.\n   * Used by `popper.js`\n   */\n  gutter?: number\n  /**\n   * The placment of the popover\n   */\n  placement?: Placement\n  /**\n   * If `true`, the popover will close when you blur out it by\n   * clicking outside or tabbing out\n   */\n  closeOnBlur?: boolean\n  /**\n   * If `true`, the popover will close when you hit the `Esc` key\n   */\n  closeOnEsc?: boolean\n  /**\n   * Callback fired when the popover opens\n   */\n  onOpen?: () => void\n  /**\n   * Callback fired when the popover closes\n   */\n  onClose?: () => void\n  /**\n   * The size of the popover arrow\n   */\n  arrowSize?: number\n  /**\n   * The `box-shadow` of the popover arrow\n   */\n  arrowShadowColor?: string\n  /**\n   * The Popper.js modifiers to use.\n   */\n  modifiers?: UsePopperProps[\"modifiers\"]\n  /**\n   * The interaction that triggers the popover.\n   *\n   * `hover` - means the popover will open when you hover with mouse or\n   * focus with keyboard on the popover trigger\n   *\n   * `click` - means the popover will open on click or\n   * press `Enter` to `Space` on keyboard\n   */\n  trigger?: keyof typeof TRIGGER_TYPE\n  openDelay?: number\n  closeDelay?: number\n  /**\n   * Performance ðŸš€:\n   * If `true`, the PopoverContent rendering will be deferred\n   * until the popover is open.\n   */\n  isLazy?: boolean\n}\n\nexport function usePopover(props: UsePopoverProps = {}) {\n  const {\n    closeOnBlur = true,\n    closeOnEsc = true,\n    initialFocusRef,\n    placement: placementProp,\n    gutter,\n    id,\n    arrowSize,\n    returnFocusOnClose = true,\n    autoFocus = true,\n    arrowShadowColor,\n    modifiers,\n    trigger = TRIGGER_TYPE.click,\n    openDelay = 200,\n    closeDelay = 200,\n    isLazy,\n  } = props\n\n  const { isOpen, onClose, onOpen, onToggle } = useDisclosure(props)\n\n  const triggerRef = useRef<HTMLElement>(null)\n  const popoverRef = useRef<HTMLElement>(null)\n\n  const isHoveringRef = useRef(false)\n\n  const [hasHeader, setHasHeader] = useBoolean()\n  const [hasBody, setHasBody] = useBoolean()\n\n  const [triggerId, popoverId, headerId, bodyId] = useIds(\n    id,\n    \"popover-trigger\",\n    \"popover-content\",\n    \"popover-header\",\n    \"popover-body\",\n  )\n\n  const fallbackShadowColor = useColorModeValue(\"gray.200\", \"whiteAlpha.300\")\n  const shadowColor = arrowShadowColor ?? fallbackShadowColor\n  const arrowColor = useToken(\"colors\", shadowColor, arrowShadowColor)\n\n  const { popper, reference, arrow } = usePopper({\n    placement: placementProp,\n    gutter,\n    forceUpdate: isOpen,\n    arrowSize,\n    arrowShadowColor: arrowColor,\n    modifiers,\n  })\n\n  useFocusOnHide(popoverRef, {\n    autoFocus: returnFocusOnClose,\n    visible: isOpen,\n    focusRef: triggerRef,\n    trigger,\n  })\n\n  useFocusOnShow(popoverRef, {\n    autoFocus: autoFocus,\n    visible: isOpen,\n    focusRef: initialFocusRef,\n    trigger,\n  })\n\n  useInteractOutside({\n    ref: popoverRef,\n    onInteractOutside: (event) => {\n      if (\n        trigger === TRIGGER_TYPE.click &&\n        closeOnBlur &&\n        !triggerRef.current?.contains(event.target as HTMLElement)\n      ) {\n        onClose()\n      }\n    },\n  })\n\n  const getPopoverProps: PropGetter = useCallback(\n    (props = {}, ref = null) => {\n      const popoverProps: HTMLProps = {\n        ...props,\n        children: isLazy ? (isOpen ? props.children : null) : props.children,\n        id: popoverId,\n        tabIndex: -1,\n        hidden: !isOpen,\n        role: \"dialog\",\n        onKeyDown: callAllHandlers(props.onKeyDown, (event) => {\n          if (closeOnEsc && event.key === \"Escape\") {\n            onClose()\n          }\n        }),\n        ref: mergeRefs(popoverRef, popper.ref, ref),\n        style: { ...props.style, ...popper.style },\n        \"aria-labelledby\": hasHeader ? headerId : undefined,\n        \"aria-describedby\": hasBody ? bodyId : undefined,\n      }\n\n      if (trigger === TRIGGER_TYPE.hover) {\n        popoverProps.role = \"tooltip\"\n        popoverProps.onMouseEnter = callAllHandlers(props.onMouseEnter, () => {\n          isHoveringRef.current = true\n        })\n        popoverProps.onMouseLeave = callAllHandlers(props.onMouseLeave, () => {\n          isHoveringRef.current = false\n          setTimeout(onClose, closeDelay)\n        })\n      }\n\n      return popoverProps\n    },\n    [\n      popoverId,\n      isOpen,\n      isLazy,\n      popper.ref,\n      popper.style,\n      hasHeader,\n      headerId,\n      hasBody,\n      bodyId,\n      trigger,\n      closeOnEsc,\n      onClose,\n      closeDelay,\n    ],\n  )\n\n  const getArrowProps: PropGetter = useCallback(\n    (props = {}, ref = null) => ({\n      ...props,\n      ref: mergeRefs(arrow.ref, ref),\n      style: {\n        ...props.style,\n        ...arrow.style,\n      },\n    }),\n    [arrow.ref, arrow.style],\n  )\n\n  const openTimeout = useRef<number>()\n  const closeTimeout = useRef<number>()\n\n  const getTriggerProps: PropGetter = useCallback(\n    (props = {}, ref = null) => {\n      const triggerProps: HTMLProps = {\n        ...props,\n        id: triggerId,\n        ref: mergeRefs(triggerRef, reference.ref, ref),\n        \"aria-haspopup\": \"dialog\",\n        \"aria-expanded\": isOpen,\n        \"aria-controls\": popoverId,\n      }\n\n      if (trigger === TRIGGER_TYPE.click) {\n        triggerProps.onClick = callAllHandlers(props.onClick, onToggle)\n      }\n\n      if (trigger === TRIGGER_TYPE.hover) {\n        /**\n         * Any content that shows on pointer hover should also show on keyboard focus.\n         * Consider focus and blur to be the `hover` for keyboard users.\n         *\n         * @see https://www.w3.org/WAI/WCAG21/Understanding/content-on-hover-or-focus.html\n         */\n        triggerProps.onFocus = callAllHandlers(props.onFocus, onOpen)\n        triggerProps.onBlur = callAllHandlers(props.onBlur, onClose)\n\n        /**\n         * Any content that shows on hover or focus must be dismissible.\n         * This case pressing `Escape` will dismiss the popover\n         */\n        triggerProps.onKeyDown = callAllHandlers(props.onKeyDown, (event) => {\n          if (event.key === \"Escape\") {\n            onClose()\n          }\n        })\n\n        triggerProps.onMouseEnter = callAllHandlers(props.onMouseEnter, () => {\n          isHoveringRef.current = true\n          openTimeout.current = window.setTimeout(onOpen, openDelay)\n        })\n\n        triggerProps.onMouseLeave = callAllHandlers(props.onMouseLeave, () => {\n          isHoveringRef.current = false\n\n          if (openTimeout.current) {\n            clearTimeout(openTimeout.current)\n            openTimeout.current = undefined\n          }\n\n          closeTimeout.current = window.setTimeout(() => {\n            if (isHoveringRef.current === false) {\n              onClose()\n            }\n          }, closeDelay)\n        })\n      }\n\n      return triggerProps\n    },\n    [\n      openDelay,\n      closeDelay,\n      isOpen,\n      onToggle,\n      popoverId,\n      reference.ref,\n      triggerId,\n      trigger,\n      onOpen,\n      onClose,\n    ],\n  )\n\n  useEffect(() => {\n    return () => {\n      if (openTimeout.current) {\n        clearTimeout(openTimeout.current)\n      }\n\n      if (closeTimeout.current) {\n        clearTimeout(closeTimeout.current)\n      }\n    }\n  }, [])\n\n  return {\n    isOpen,\n    onClose,\n    headerId,\n    hasHeader,\n    setHasHeader,\n    bodyId,\n    hasBody,\n    setHasBody,\n    getArrowProps,\n    getTriggerProps,\n    getPopoverProps,\n  }\n}\n\nexport type UsePopoverReturn = ReturnType<typeof usePopover>\n"],"file":"use-popover.js"}